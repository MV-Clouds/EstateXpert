<template>
  <template if:true={showSpinner}>
    <c-spinner-component></c-spinner-component>
  </template>

  <div class="maindiv">
    <div class="stylebtn">
      <div class="groupBtn">
        <button class="btn_in_blue radius_css1" onclick={saveChanges} disabled={disableEnableBtn}>Save Changes</button>
        <button class="btn_in_white radius_css2" onclick={cancelChanges} disabled={disableEnableBtn}>Cancel</button>
      </div>
      <button class="btn_in_blue" onclick={modalPopup}>Add New Files</button>
      <button class="btn_in_white" onclick={toDeleteAllMedia} disabled={isAllDelete}>Delete All</button>
    </div>

    <template if:true={isData}>
      <div class="maindivconatiner">
        <div class="container">
          <div class="image-tab-container">
            <div class="tab-menu">
              <ul>
                <li onclick={tabing} data-name="Sort On exposeData"><a class="active-tab" data-tab-id="tab1">Sort On
                    Expose</a></li>
                <li onclick={tabing} data-name="Sort On websiteData"><a data-tab-id="tab2">Sort On Website</a></li>
                <li onclick={tabing} data-name="Sort On portalData Feed"><a data-tab-id="tab3">Sort On Portal Feed</a>
                </li>
              </ul>
            </div>

            <div class="tab active-tab-content" data-id="tab1">
              <div class="sort-container">
                <div class="sorting_btn">
                  <button class="sort_btn_blue" onclick={getExpose}>Add All</button>
                  <button class="sort_btn_white" onclick={clearExpose}>Clear All</button>
                  <button class="sort_btn_white" onclick={showImages} data-name="Expose">View All</button>
                </div>
              </div>
              <div class="dragable-container" ondragover={handleDragOver} ondrop={handledDrop} data-type="exposeData">
                <template for:each={exposeData} for:item="imageUrl" for:index="index">
                  <div key={imageUrl.Id} data-index={index} style={imageUrl.displayStyle} class="dropableimage"
                    ondragenter={handleDragEnter} ondragleave={handleDragLeave}>
                    <div class="close" onclick={deleteIcon} data-id={imageUrl.Id} data-field="MVEX__IsOnExpose__c">
                      <svg width="10" height="10" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M7.0999 7.5L4.3999 4.8L1.6999 7.5L0.899902 6.7L3.5999 4L0.899902 1.3L1.6999 0.5L4.3999 3.2L7.0999 0.5L7.8999 1.3L5.1999 4L7.8999 6.7L7.0999 7.5Z"
                          fill="white" />
                      </svg>
                    </div>
                    <img src={imageUrl.MVEX__BaseUrl__c} alt="Image" draggable="true" ondragstart={handleDragStart}
                      data-index={index}></img>
                  </div>
                </template>
              </div>
            </div>

            <div class="tab" data-id="tab2">
              <div class="sort-container">
                <div class="sorting_btn">
                  <button class="sort_btn_blue" onclick={getWebsite}>Add All</button>
                  <button class="sort_btn_white" onclick={clearWebsite}>Clear All</button>
                  <button class="sort_btn_white" onclick={showImages} data-name="Website">View All</button>
                </div>
              </div>
              <div class="dragable-container" ondragover={handleDragOver} ondrop={handledDrop} data-type="websiteData">
                <template for:each={websiteData} for:item="imageUrl" for:index="index">
                  <div key={imageUrl.Id} data-index={index} style={imageUrl.displayStyle} class="dropableimage"
                    ondragenter={handleDragEnter} ondragleave={handleDragLeave}>
                    <div class="close" onclick={deleteIcon} data-id={imageUrl.Id} data-field="MVEX__IsOnWebsite__c">
                      <svg width="10" height="10" viewBox="0 0 8 8" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M7.0999 7.5L4.3999 4.8L1.6999 7.5L0.899902 6.7L3.5999 4L0.899902 1.3L1.6999 0.5L4.3999 3.2L7.0999 0.5L7.8999 1.3L5.1999 4L7.8999 6.7L7.0999 7.5Z"
                          fill="white" />
                      </svg>
                    </div>
                    <img key={imageUrl.Id} src={imageUrl.MVEX__BaseUrl__c} alt="Image" draggable="true"
                      ondragstart={handleDragStart} data-index={index}></img>
                  </div>
                </template>
              </div>
            </div>

            <div class="tab" data-id="tab3">
              <div class="sort-container">
                <div class="sorting_btn">
                  <button class="sort_btn_blue" onclick={getPortal}>Add All</button>
                  <button class="sort_btn_white" onclick={clearPortal}>Clear All</button>
                  <button class="sort_btn_white" onclick={showImages} data-name="Portal">View All</button>
                </div>
              </div>
              <div class="dragable-container" ondragover={handleDragOver} ondrop={handledDrop} data-type="portalData">
                <template for:each={portalData} for:item="imageUrl" for:index="index">
                  <div key={imageUrl.Id} data-index={index} style={imageUrl.displayStyle} class="dropableimage"
                    ondragenter={handleDragEnter} ondragleave={handleDragLeave}>
                    <div class="close" onclick={deleteIcon} data-id={imageUrl.Id} data-field="MVEX__IsOnPortalFeed__c">
                      <svg width="10" height="10" viewBox="0 0 8 8" fill="none">
                        <path
                          d="M7.0999 7.5L4.3999 4.8L1.6999 7.5L0.899902 6.7L3.5999 4L0.899902 1.3L1.6999 0.5L4.3999 3.2L7.0999 0.5L7.8999 1.3L5.1999 4L7.8999 6.7L7.0999 7.5Z"
                          fill="white" />
                      </svg>
                    </div>
                    <img key={imageUrl.Id} src={imageUrl.MVEX__BaseUrl__c} alt="Image" draggable="true"
                      ondragstart={handleDragStart} data-index={index}></img>
                  </div>
                </template>
              </div>
            </div>
          </div>
        </div>

        <template if:false={showMobileView}>
          <div class="field-mapping-container">
            <div class="tableContainer">
              <div class="imagsAndMedia_header-row">
                <div class="slds-col">
                  <p class="header-text">Thumbnail</p>
                </div>
                <div class="slds-col">
                  <p class="header-text">Title</p>
                </div>
                <div class="slds-col">
                  <p class="header-text">Size (kb)</p>
                </div>
                <div class="slds-col">
                  <p class="header-text">Tags</p>
                </div>
                <div class="slds-col">
                  <p class="header-text">Status</p>
                </div>
                <div class="slds-col">
                  <p class="header-text">Actions</p>
                </div>
              </div>
              <div class="imagesAndMedia__recordValues">
                <template for:each={data} for:item="item" for:index="index">
                  <div key={item.Id} class="imagesAndMedia_data-row">
                    <div class="slds-col font_style_css">
                      <img src={item.MVEX__BaseUrl__c}
                        class="slds-avatar slds-avatar_rectangle slds-avatar_large customimg" alt="Thumbnail"
                        draggable="false" />
                    </div>
                    <div class="slds-col font_style_css">
                      {item.Name}
                    </div>
                    <div class="slds-col font_style_css">
                      {item.MVEX__Size__c}
                    </div>
                    <div class="slds-col tags_css font_style_css">
                      <template for:each={item.MVEX__Tags__c} for:item="tag">
                        <template if:true={item.MVEX__Tags__c}>
                          <label key={tag} class="tags_label">{tag}</label>
                        </template>
                      </template>
                    </div>
                    <div class="slds-col checklist_css align_css">
                      <div class="checklist_css_values">
                        <Label>Appears On</Label>
                        <div class="checkbox_div">
                          <input class="checkbox-expose" type="checkbox" name="expose" value={item.MVEX__IsOnExpose__c}
                            data-field="MVEX__IsOnExpose__c" data-key={item.Id} onchange={handleCheckboxChange}
                            checked={item.MVEX__IsOnExpose__c} /> Is On Expose
                        </div>

                        <div class="checkbox_div">
                          <input class="checkbox-website statusbox" type="checkbox" name="website"
                            value={item.MVEX__IsOnWebsite__c} data-field="MVEX__IsOnWebsite__c" data-key={item.Id}
                            onchange={handleCheckboxChange} checked={item.MVEX__IsOnWebsite__c} /> Is On Website
                        </div>

                        <div class="checkbox_div">
                          <input class="checkbox-portal statusbox" type="checkbox" name="portal"
                            value={item.MVEX__IsOnPortalFeed__c} data-field="MVEX__IsOnPortalFeed__c" data-key={item.Id}
                            onchange={handleCheckboxChange} checked={item.MVEX__IsOnPortalFeed__c} /> Is On Portal Feed
                        </div>
                      </div>
                    </div>
                    <div class="slds-col action_icons_css">
                      <div data-recid={item.Id} data-index={index} data-description={item.Name}
                        data-src={item.MVEX__BaseUrl__c} data-exturl={item.MVEX__ExternalLink__c}
                        data-size={item.MVEX__Size__c} data-mimetype={item.MVEX__MimeType__c} onclick={handleImgClick}>
                        <svg width="23" height="20" fill="#0176d3" version="1.1" viewBox="0 0 92 92"
                          enable-background="new 0 0 92 92" xml:space="preserve">
                          <path
                            d="M91.3,43.8C90.6,42.8,74.4,19,46,19C17.6,19,1.4,42.8,0.7,43.8c-0.9,1.3-0.9,3.1,0,4.5 C1.4,49.2,17.6,73,46,73c28.4,0,44.6-23.8,45.3-24.8C92.2,46.9,92.2,45.1,91.3,43.8z M46,65C26.7,65,13.5,51.4,9,46 c4.5-5.5,17.6-19,37-19c19.3,0,32.5,13.6,37,19C78.4,51.5,65.3,65,46,65z M48.3,29.6c-4.4-0.6-8.7,0.5-12.3,3.2c0,0,0,0,0,0 c-7.3,5.5-8.8,15.9-3.3,23.2c2.7,3.6,6.5,5.8,10.9,6.5c0.8,0.1,1.6,0.2,2.3,0.2c3.6,0,7-1.2,9.9-3.3c7.3-5.5,8.8-15.9,3.3-23.2 C56.6,32.5,52.7,30.2,48.3,29.6z M52.3,54.5c-2.2,1.7-5,2.4-7.8,2c-2.8-0.4-5.3-1.9-7-4.1C34.1,47.7,35,41,39.7,37.5 c2.2-1.7,5-2.4,7.8-2c2.8,0.4,5.3,1.9,7,4.1C57.9,44.3,57,51,52.3,54.5z M51.9,40c0.8,0.7,1.2,1.8,1.2,2.8c0,1-0.4,2.1-1.2,2.8 c-0.7,0.7-1.8,1.2-2.8,1.2c-1.1,0-2.1-0.4-2.8-1.2c-0.8-0.8-1.2-1.8-1.2-2.8c0-1.1,0.4-2.1,1.2-2.8c0.7-0.8,1.8-1.2,2.8-1.2 C50.2,38.9,51.2,39.3,51.9,40z">
                          </path>
                        </svg>
                      </div>
                      <div data-key={item.Id} data-url={item.MVEX__BaseUrl__c} data-name={item.Name}
                        data-isexternal={item.MVEX__Size__c} onclick={downloadRowImage}>
                        <svg width="24" height="22" viewBox="0 0 11 14" fill="none">
                          <path
                            d="M1.2578 10.5406C1.27811 10.5406 1.29759 10.5486 1.31195 10.563C1.32631 10.5774 1.33438 10.5968 1.33438 10.6171V11.9955C1.33438 12.2915 1.57441 12.5316 1.87041 12.5316H9.52808C9.67025 12.5316 9.80659 12.4751 9.90711 12.3746C10.0076 12.274 10.0641 12.1377 10.0641 11.9955V10.6171C10.0641 10.5968 10.0722 10.5774 10.0865 10.563C10.1009 10.5486 10.1204 10.5406 10.1407 10.5406C10.161 10.5406 10.1805 10.5486 10.1948 10.563C10.2092 10.5774 10.2173 10.5968 10.2173 10.6171V11.9955C10.2173 12.1783 10.1447 12.3536 10.0154 12.4829C9.88616 12.6121 9.71086 12.6847 9.52808 12.6847H1.87041C1.68763 12.6847 1.51233 12.6121 1.38308 12.4829C1.25383 12.3536 1.18122 12.1783 1.18122 11.9955V10.6171C1.18122 10.5968 1.18929 10.5774 1.20365 10.563C1.21801 10.5486 1.23749 10.5406 1.2578 10.5406Z"
                            stroke="#0276D3" stroke-width="0.765763" />
                          <path
                            d="M1.54599 5.69787C1.63214 5.61182 1.74892 5.5635 1.87068 5.5635C1.99243 5.5635 2.10921 5.61182 2.19536 5.69787L5.24004 8.74194V1.2748C5.24004 1.15295 5.28845 1.03608 5.37462 0.949916C5.46078 0.863751 5.57765 0.815344 5.6995 0.815344C5.82136 0.815344 5.93822 0.863751 6.02439 0.949916C6.11055 1.03608 6.15896 1.15295 6.15896 1.2748V8.74194L9.20364 5.69787C9.28975 5.61176 9.40655 5.56338 9.52833 5.56338C9.65011 5.56338 9.7669 5.61176 9.85301 5.69787C9.93913 5.78398 9.9875 5.90077 9.9875 6.02255C9.9875 6.14433 9.93913 6.26112 9.85301 6.34724L6.02419 10.1761C5.93804 10.2621 5.82126 10.3104 5.6995 10.3104C5.57774 10.3104 5.46097 10.2621 5.37482 10.1761L1.54599 6.34724C1.45995 6.26109 1.41162 6.14431 1.41162 6.02255C1.41162 5.90079 1.45995 5.78402 1.54599 5.69787Z"
                            fill="#0276D3" />
                        </svg>
                      </div>
                      <div data-key={item.Id} data-url={item.MVEX__BaseUrl__c} data-tags={item.MVEX__Tags__c}
                        data-name={item.Name} onclick={editImageNameToStore}>
                        <svg width="23" height="22" viewBox="0 0 15 14" fill="none">
                          <path
                            d="M12.2768 8.55645V11.497C12.2766 11.9131 12.1113 12.3121 11.8171 12.6063C11.5229 12.9005 11.1239 13.0658 10.7078 13.066H3.02457C2.81777 13.0659 2.61303 13.025 2.4221 12.9455C2.23118 12.8661 2.05784 12.7497 1.91204 12.603C1.76624 12.4563 1.65086 12.2823 1.57253 12.0909C1.4942 11.8995 1.45446 11.6946 1.45559 11.4878V3.8131C1.45436 3.60663 1.49412 3.40197 1.57257 3.21098C1.65101 3.01998 1.76659 2.84646 1.91259 2.70046C2.05859 2.55446 2.23211 2.43889 2.4231 2.36044C2.6141 2.282 2.81876 2.24224 3.02523 2.24347H5.96515"
                            stroke="#0276D3" stroke-width="1.14864" stroke-linecap="round" stroke-linejoin="round" />
                          <path
                            d="M12.2678 4.94956L9.5623 2.24343M4.15137 9.45845V8.02458C4.15269 7.78815 4.24674 7.56098 4.41297 7.39342L10.7259 1.08044C10.8097 0.99574 10.9094 0.928495 11.0194 0.882601C11.1293 0.836707 11.2473 0.813076 11.3664 0.813076C11.4855 0.813076 11.6035 0.836707 11.7134 0.882601C11.8233 0.928495 11.9231 0.99574 12.0068 1.08044L13.4314 2.50504C13.5161 2.5888 13.5834 2.68854 13.6293 2.79847C13.6751 2.9084 13.6988 3.02635 13.6988 3.14547C13.6988 3.2646 13.6751 3.38254 13.6293 3.49248C13.5834 3.60241 13.5161 3.70214 13.4314 3.78591L7.11844 10.0989C6.95057 10.2656 6.72385 10.3596 6.48727 10.3605H5.05341C4.9349 10.3607 4.81753 10.3375 4.70801 10.2922C4.59849 10.2469 4.49898 10.1805 4.41518 10.0967C4.33138 10.0129 4.26495 9.91337 4.21968 9.80385C4.17441 9.69433 4.15119 9.57696 4.15137 9.45845Z"
                            stroke="#0276D3" stroke-width="1.14864" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                      </div>
                      <div data-key={item.Id} data-url={item.MVEX__BaseUrl__c} data-label={item.MVEX__Filename__c}
                        data-size={item.MVEX__Size__c} onclick={deleteRow}>
                        <svg width="24" height="24" viewBox="0 0 16 16" fill="none">
                          <path d="M2.06494 4.34671H3.34122H13.5514" stroke="#0276D3" stroke-width="0.765766"
                            stroke-linecap="round" stroke-linejoin="round" />
                          <path
                            d="M5.25523 4.34671V3.07044C5.25523 2.73195 5.3897 2.40732 5.62905 2.16797C5.8684 1.92862 6.19302 1.79416 6.53151 1.79416H9.08406C9.42255 1.79416 9.74718 1.92862 9.98653 2.16797C10.2259 2.40732 10.3603 2.73195 10.3603 3.07044V4.34671M12.2748 4.34671V13.2806C12.2748 13.6191 12.1403 13.9438 11.9009 14.1831C11.6616 14.4225 11.337 14.5569 10.9985 14.5569H4.6171C4.27861 14.5569 3.95398 14.4225 3.71463 14.1831C3.47528 13.9438 3.34082 13.6191 3.34082 13.2806V4.34671H12.2748Z"
                            stroke="#0276D3" stroke-width="0.765766" stroke-linecap="round" stroke-linejoin="round" />
                          <path d="M6.53174 7.5374V11.3662" stroke="#0276D3" stroke-width="0.765766"
                            stroke-linecap="round" stroke-linejoin="round" />
                          <path d="M9.08398 7.5374V11.3662" stroke="#0276D3" stroke-width="0.765766"
                            stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                      </div>
                    </div>
                  </div>
                </template>
              </div>
            </div>
          </div>
        </template>

        <template if:true={showMobileView}>
          <template for:each={data} for:item="item">
            <div class="card-view" key={item.Id}>
              <div class="inner_card_view">
                <div class="image_info_cls">
                  <div class="img-section">
                    <img src={item.MVEX__BaseUrl__c}
                      class="slds-avatar slds-avatar_rectangle slds-avatar_large customimg" alt="Thumbnail" />
                  </div>
                  <div class="detail-section">
                    <div class="name-section">
                      <label>Name:</label>
                      <h2 class="slds-truncate" title="Name">{item.Name}</h2>
                    </div>
                    <div class="name-section">
                      <label>Size:</label>
                      <h2 class="slds-truncate" title="Size">{item.MVEX__Size__c}</h2>
                    </div>
                  </div>
                  <div class="slds-col checklist_css">
                    <Label>Appears On</Label>
                    <div class="checkbox_div">
                      <input class="checkbox-expose" type="checkbox" name="expose" value={item.MVEX__IsOnExpose__c}
                        data-field="MVEX__IsOnExpose__c" data-key={item.Id} onchange={handleCheckboxChange}
                        checked={item.MVEX__IsOnExpose__c} /> Expose
                    </div>

                    <div class="checkbox_div">
                      <input class="checkbox-website statusbox" type="checkbox" name="website"
                        value={item.MVEX__IsOnWebsite__c} data-field="MVEX__IsOnWebsite__c" data-key={item.Id}
                        onchange={handleCheckboxChange} checked={item.MVEX__IsOnWebsite__c} /> Website
                    </div>

                    <div class="checkbox_div">
                      <input class="checkbox-portal statusbox" type="checkbox" name="portal"
                        value={item.MVEX__IsOnPortalFeed__c} data-field="MVEX__IsOnPortalFeed__c" data-key={item.Id}
                        onchange={handleCheckboxChange} checked={item.MVEX__IsOnPortalFeed__c} /> Portal Feed
                    </div>
                  </div>
                </div>

                <div class="slds-truncate btn-div" title="actions">
                  <div class="icon-btn slds-p-around_xx-small" data-recid={item.Id} data-index={index}
                    data-description={item.Name} data-src={item.MVEX__BaseUrl__c}
                    data-exturl={item.MVEX__ExternalLink__c} data-mimetype={item.MVEX__MimeType__c}
                    data-size={item.MVEX__Size__c} onclick={handleImgClick}>
                    <svg width="20" height="17" fill="#0176d3" version="1.1" viewBox="0 0 92 92"
                      enable-background="new 0 0 92 92" xml:space="preserve">
                      <path
                        d="M91.3,43.8C90.6,42.8,74.4,19,46,19C17.6,19,1.4,42.8,0.7,43.8c-0.9,1.3-0.9,3.1,0,4.5 C1.4,49.2,17.6,73,46,73c28.4,0,44.6-23.8,45.3-24.8C92.2,46.9,92.2,45.1,91.3,43.8z M46,65C26.7,65,13.5,51.4,9,46 c4.5-5.5,17.6-19,37-19c19.3,0,32.5,13.6,37,19C78.4,51.5,65.3,65,46,65z M48.3,29.6c-4.4-0.6-8.7,0.5-12.3,3.2c0,0,0,0,0,0 c-7.3,5.5-8.8,15.9-3.3,23.2c2.7,3.6,6.5,5.8,10.9,6.5c0.8,0.1,1.6,0.2,2.3,0.2c3.6,0,7-1.2,9.9-3.3c7.3-5.5,8.8-15.9,3.3-23.2 C56.6,32.5,52.7,30.2,48.3,29.6z M52.3,54.5c-2.2,1.7-5,2.4-7.8,2c-2.8-0.4-5.3-1.9-7-4.1C34.1,47.7,35,41,39.7,37.5 c2.2-1.7,5-2.4,7.8-2c2.8,0.4,5.3,1.9,7,4.1C57.9,44.3,57,51,52.3,54.5z M51.9,40c0.8,0.7,1.2,1.8,1.2,2.8c0,1-0.4,2.1-1.2,2.8 c-0.7,0.7-1.8,1.2-2.8,1.2c-1.1,0-2.1-0.4-2.8-1.2c-0.8-0.8-1.2-1.8-1.2-2.8c0-1.1,0.4-2.1,1.2-2.8c0.7-0.8,1.8-1.2,2.8-1.2 C50.2,38.9,51.2,39.3,51.9,40z">
                      </path>
                    </svg>
                  </div>
                  <div class="icon-btn slds-p-around_xx-small" title="download" data-key={item.Id}
                    data-isexternal={item.MVEX__Size__c} data-url={item.MVEX__BaseUrl__c} data-name={item.Name}
                    onclick={downloadRowImage}>
                    <svg width="20" height="18" viewBox="0 0 11 14" fill="none">
                      <path
                        d="M1.2578 10.5406C1.27811 10.5406 1.29759 10.5486 1.31195 10.563C1.32631 10.5774 1.33438 10.5968 1.33438 10.6171V11.9955C1.33438 12.2915 1.57441 12.5316 1.87041 12.5316H9.52808C9.67025 12.5316 9.80659 12.4751 9.90711 12.3746C10.0076 12.274 10.0641 12.1377 10.0641 11.9955V10.6171C10.0641 10.5968 10.0722 10.5774 10.0865 10.563C10.1009 10.5486 10.1204 10.5406 10.1407 10.5406C10.161 10.5406 10.1805 10.5486 10.1948 10.563C10.2092 10.5774 10.2173 10.5968 10.2173 10.6171V11.9955C10.2173 12.1783 10.1447 12.3536 10.0154 12.4829C9.88616 12.6121 9.71086 12.6847 9.52808 12.6847H1.87041C1.68763 12.6847 1.51233 12.6121 1.38308 12.4829C1.25383 12.3536 1.18122 12.1783 1.18122 11.9955V10.6171C1.18122 10.5968 1.18929 10.5774 1.20365 10.563C1.21801 10.5486 1.23749 10.5406 1.2578 10.5406Z"
                        stroke="#0276D3" stroke-width="0.765763" />
                      <path
                        d="M1.54599 5.69787C1.63214 5.61182 1.74892 5.5635 1.87068 5.5635C1.99243 5.5635 2.10921 5.61182 2.19536 5.69787L5.24004 8.74194V1.2748C5.24004 1.15295 5.28845 1.03608 5.37462 0.949916C5.46078 0.863751 5.57765 0.815344 5.6995 0.815344C5.82136 0.815344 5.93822 0.863751 6.02439 0.949916C6.11055 1.03608 6.15896 1.15295 6.15896 1.2748V8.74194L9.20364 5.69787C9.28975 5.61176 9.40655 5.56338 9.52833 5.56338C9.65011 5.56338 9.7669 5.61176 9.85301 5.69787C9.93913 5.78398 9.9875 5.90077 9.9875 6.02255C9.9875 6.14433 9.93913 6.26112 9.85301 6.34724L6.02419 10.1761C5.93804 10.2621 5.82126 10.3104 5.6995 10.3104C5.57774 10.3104 5.46097 10.2621 5.37482 10.1761L1.54599 6.34724C1.45995 6.26109 1.41162 6.14431 1.41162 6.02255C1.41162 5.90079 1.45995 5.78402 1.54599 5.69787Z"
                        fill="#0276D3" />
                    </svg>
                  </div>
                  <div class="icon-btn slds-p-around_xx-small" data-key={item.Id} data-url={item.MVEX__BaseUrl__c}
                    data-tags={item.MVEX__Tags__c} data-name={item.Name} onclick={editImageNameToStore}>
                    <svg width="20" height="19" viewBox="0 0 15 14" fill="none">
                      <path
                        d="M12.2768 8.55645V11.497C12.2766 11.9131 12.1113 12.3121 11.8171 12.6063C11.5229 12.9005 11.1239 13.0658 10.7078 13.066H3.02457C2.81777 13.0659 2.61303 13.025 2.4221 12.9455C2.23118 12.8661 2.05784 12.7497 1.91204 12.603C1.76624 12.4563 1.65086 12.2823 1.57253 12.0909C1.4942 11.8995 1.45446 11.6946 1.45559 11.4878V3.8131C1.45436 3.60663 1.49412 3.40197 1.57257 3.21098C1.65101 3.01998 1.76659 2.84646 1.91259 2.70046C2.05859 2.55446 2.23211 2.43889 2.4231 2.36044C2.6141 2.282 2.81876 2.24224 3.02523 2.24347H5.96515"
                        stroke="#0276D3" stroke-width="1.14864" stroke-linecap="round" stroke-linejoin="round" />
                      <path
                        d="M12.2678 4.94956L9.5623 2.24343M4.15137 9.45845V8.02458C4.15269 7.78815 4.24674 7.56098 4.41297 7.39342L10.7259 1.08044C10.8097 0.99574 10.9094 0.928495 11.0194 0.882601C11.1293 0.836707 11.2473 0.813076 11.3664 0.813076C11.4855 0.813076 11.6035 0.836707 11.7134 0.882601C11.8233 0.928495 11.9231 0.99574 12.0068 1.08044L13.4314 2.50504C13.5161 2.5888 13.5834 2.68854 13.6293 2.79847C13.6751 2.9084 13.6988 3.02635 13.6988 3.14547C13.6988 3.2646 13.6751 3.38254 13.6293 3.49248C13.5834 3.60241 13.5161 3.70214 13.4314 3.78591L7.11844 10.0989C6.95057 10.2656 6.72385 10.3596 6.48727 10.3605H5.05341C4.9349 10.3607 4.81753 10.3375 4.70801 10.2922C4.59849 10.2469 4.49898 10.1805 4.41518 10.0967C4.33138 10.0129 4.26495 9.91337 4.21968 9.80385C4.17441 9.69433 4.15119 9.57696 4.15137 9.45845Z"
                        stroke="#0276D3" stroke-width="1.14864" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                  </div>
                  <div class="icon-btn slds-p-around_xx-small" data-key={item.Id} data-url={item.MVEX__BaseUrl__c}
                    onclick={deleteRow}>
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="none">
                      <path d="M2.06494 4.34671H3.34122H13.5514" stroke="#0276D3" stroke-width="0.765766"
                        stroke-linecap="round" stroke-linejoin="round" />
                      <path
                        d="M5.25523 4.34671V3.07044C5.25523 2.73195 5.3897 2.40732 5.62905 2.16797C5.8684 1.92862 6.19302 1.79416 6.53151 1.79416H9.08406C9.42255 1.79416 9.74718 1.92862 9.98653 2.16797C10.2259 2.40732 10.3603 2.73195 10.3603 3.07044V4.34671M12.2748 4.34671V13.2806C12.2748 13.6191 12.1403 13.9438 11.9009 14.1831C11.6616 14.4225 11.337 14.5569 10.9985 14.5569H4.6171C4.27861 14.5569 3.95398 14.4225 3.71463 14.1831C3.47528 13.9438 3.34082 13.6191 3.34082 13.2806V4.34671H12.2748Z"
                        stroke="#0276D3" stroke-width="0.765766" stroke-linecap="round" stroke-linejoin="round" />
                      <path d="M6.53174 7.5374V11.3662" stroke="#0276D3" stroke-width="0.765766" stroke-linecap="round"
                        stroke-linejoin="round" />
                      <path d="M9.08398 7.5374V11.3662" stroke="#0276D3" stroke-width="0.765766" stroke-linecap="round"
                        stroke-linejoin="round" />
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </template>
        </template>
      </div>
    </template>
    <template if:false={isData}>
      <div class="empty-state">
        <div class="empty-state__content">
          <div class="empty-state__icon">
            <img src="/resource/MVEX__emptyState" alt="" draggable="false">
          </div>
          <div class="empty-state__message">No images are available for this listing.</div>
        </div>
      </div>
    </template>


    <div lwc:dom="manual" class="download-container"></div>

    <template if:true={isEdit}>
      <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
        class="slds-modal slds-fade-in-open">
        <div class="slds-modal__container">
          <div class="slds-modal__close closs_icon_css" onclick={closePopupEdit}>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M2.53317 19.3333L0.666504 17.4667L8.13317 9.99999L0.666504 2.53332L2.53317 0.666656L9.99984 8.13332L17.4665 0.666656L19.3332 2.53332L11.8665 9.99999L19.3332 17.4667L17.4665 19.3333L9.99984 11.8667L2.53317 19.3333Z"
                fill="white" />
            </svg>
          </div>

          <div class="slds-modal__header blue-header">
            <h1 class="slds-modal__title slds-hyphenate" tabindex="-1">Edit Name</h1>
          </div>
          <div class="slds-modal__content slds-p-around_medium slds-p-bottom_small modalbody" id="modal-content-id-1">
            <div class="content_body">
              <label for="title" class="slds-m-bottom_small edit_name_label"><abbr title="required"
                  class="slds-required">*</abbr>Name</label>
              <lightning-input onchange={storeImgName} value={currentImgName} label="Name"
                variant="label-hidden"></lightning-input>
              <br />
              <label for="title" class="slds-m-bottom_small slds-p-left_xx-small edit_name_label">Tags</label>
              <div class="slds-truncate slds-p-around_xx-small edit_name_tags">
                <div class="edit_tags_css">
                  <input type="checkbox" name="Floorplan" onchange={tagsChecked} value={floorplanChecked}
                    checked={floorplanChecked} /> Floorplan
                </div>
                <div class="edit_tags_css">
                  <input type="checkbox" name="Virtual Tour" onchange={tagsChecked} value={virtualTourChecked}
                    checked={virtualTourChecked} /> Virtual Tour
                </div>
                <div class="edit_tags_css">
                  <input type="checkbox" name="360tour" onchange={tagsChecked} value={tourChecked}
                    checked={tourChecked} /> 360tour
                </div>
                <div class="edit_tags_css">
                  <input type="checkbox" name="Interior" onchange={tagsChecked} value={interiorChecked}
                    checked={interiorChecked} /> Interior
                </div>
                <div class="edit_tags_css">
                  <input type="checkbox" name="Exterior" onchange={tagsChecked} value={exteriorChecked}
                    checked={exteriorChecked} />Exterior
                </div>
              </div>
            </div>
            <div class="edit_modal_footerbtns">
              <button class="cancel_btn_css" aria-label="Cancel and close" onclick={closePopupEdit}>Close</button>
              <button class="save_btn_css" onclick={confirmEdit}>Save</button>
            </div>
          </div>
        </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
    </template>

    <template if:true={isPopup}>
      <c-aws-file-uploader property-id={propertyId} onclose={closePopupModal}
        oncloseandrefresh={closePopupAndRefresh}></c-aws-file-uploader>
    </template>

    <template if:true={isdelete}>
      <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
        class="slds-modal slds-fade-in-open">
        <div class="slds-modal__container">
          <div class="slds-modal__close closs_icon_css" onclick={closePopup}>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M2.53317 19.3333L0.666504 17.4667L8.13317 9.99999L0.666504 2.53332L2.53317 0.666656L9.99984 8.13332L17.4665 0.666656L19.3332 2.53332L11.8665 9.99999L19.3332 17.4667L17.4665 19.3333L9.99984 11.8667L2.53317 19.3333Z"
                fill="white" />
            </svg>
          </div>

          <div class="slds-modal__header blue-header">
            <h1 class="slds-modal__title slds-hyphenate" tabindex="-1">Delete Media</h1>
          </div>
          <div class="slds-modal__content slds-p-around_medium slds-p-bottom_small modalbody">
            <div class="content_body delete_modal_font_css">
              <p>Are you sure to delete Media?</p>
            </div>
            <div class="edit_modal_footerbtns">
              <button class="cancel_btn_css" onclick={closePopup}>No</button>
              <button class="delete_btn_css" onclick={handleDelete}>Yes</button>
            </div>
          </div>
        </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
    </template>

    <template if:true={isDeleteAll}>
      <section role="dialog" tabindex="-1" aria-modal="true" aria-labelledby="modal-heading-01"
        class="slds-modal slds-fade-in-open">
        <div class="slds-modal__container">
          <div class="slds-modal__close closs_icon_css" onclick={closePopup}>
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M2.53317 19.3333L0.666504 17.4667L8.13317 9.99999L0.666504 2.53332L2.53317 0.666656L9.99984 8.13332L17.4665 0.666656L19.3332 2.53332L11.8665 9.99999L19.3332 17.4667L17.4665 19.3333L9.99984 11.8667L2.53317 19.3333Z"
                fill="white" />
            </svg>
          </div>

          <div class="slds-modal__header blue-header">
            <h1 class="slds-modal__title slds-hyphenate" tabindex="-1">Delete All Media</h1>
          </div>
          <div class="slds-modal__content slds-p-around_medium slds-p-bottom_small modalbody">
            <div class="content_body delete_modal_font_css">
              <p>Are you sure to delete all Media?</p>
            </div>
            <div class="edit_modal_footerbtns">
              <button class="cancel_btn_css" aria-label="Cancel and close" onclick={closePopup}>No</button>
              <button class="delete_btn_css" onclick={deleteAllMedia}>Yes</button>
            </div>
          </div>
        </div>
      </section>
      <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
    </template>
  </div>

  <template if:true={showImagePreview}>
    <div class="slds-modal slds-fade-in-open image_preview" style='background: rgba(0, 0, 0, 0.8);' role="dialog"
      aria-modal="true">
      <div class="image_control_bar" style="background: #0000008c;" onclick={stopEventPropogation}>
        <div class="image_title">
          <lightning-icon icon-name="doctype:image" title="Image" size="medium"></lightning-icon>
          <h2>{previewImageTitle}</h2>
        </div>
        <div class="close_img" onclick={closeImagePreview}>
          <lightning-icon icon-name="utility:close" title="close" size="small"></lightning-icon>
        </div>
      </div>
      <div class="img_preview_container">
        <template if:true={isImageHavePreview}>
          <img src={previewImageSrc} onload={handleImageLoaded} onerror={handleImageNotLoaded}
            onclick={stopEventPropogation} />
        </template>
        <template if:false={isImageHavePreview}>
          <h2 style="color: white; font-size: 1rem;"> Sorry, This Image Preview Does Not Supported</h2>
        </template>
        <template if:true={previewImgSpinner}>
          <div class="slds-spinner_container" style="position: absolute; background : #04040466">
            <div class="slds-spinner--brand  slds-spinner slds-spinner--large slds-is-relative" role="alert">
              <span class="slds-assistive-text">Loading</span>
              <div class="slds-spinner__dot-a"></div>
              <div class="slds-spinner__dot-b"></div>
            </div>
          </div>
        </template>
      </div>
      <div if:true={isNextAndPreviousBtn} class="Next_Previous_btn">
        <template if:true={notFirstImg}>
          <div class="Previous_img_btn" onclick={changeImg} data-name="Previous_Image">
            <lightning-icon icon-name="utility:chevronleft" title="Previous" size="small"></lightning-icon>
          </div>
        </template>
        <template if:true={notLastImg}>
          <div class="Next_img_btn" onclick={changeImg} data-name="Next_Image">
            <lightning-icon icon-name="utility:chevronright" title="Next" size="small"></lightning-icon>
          </div>
        </template>
      </div>
    </div>
  </template>
</template>