<template>
    <template if:true={isSpinner}>
        <c-spinner-component></c-spinner-component>
    </template>

    <template if:true={isDataLoaded}>
        <div class="smi_container">
            <div class="main_header_cls">
                <div class="sub_main_header_css">
                    <div slot="title" class="header_block_css">
                        <div class="svg_back_icon" onclick={backToControlCenter}>
                            <svg width="26" height="22" viewBox="0 0 30 26" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M28.3334 24.224C25.0711 20.2418 22.1742 17.9822 19.6427 17.4454C17.1111 16.9085 14.7009 16.8274 12.412 17.202V24.3334L1.66669 12.6967L12.412 1.66669V8.44469C16.6445 8.47802 20.2427 9.99646 23.2067 13C26.1702 16.0036 27.8791 19.7449 28.3334 24.224Z"
                                    fill="#131314" stroke="#131314" stroke-width="2" stroke-linejoin="round" />
                            </svg>
                        </div>
                        <div class="portal_mapping">
                            Lead Capture
                        </div>
                    </div>
                    <div class="header">
                        <template if:true={isGoogle}>
                            <template if:false={GoogleData.isValid}>
                                <button class="save-btn" onclick={newIntegrationModal} data-name="Google">New</button>
                            </template>
                            <template if:true={GoogleData.isValid}>
                                <button class="save-btn" onclick={newIntegrationModal} data-name="Google">Edit</button>
                                <button class="save-btn" onclick={configureMapping}>Configure Mapping</button>
                                <button class="deactivate-btn" onclick={handleDeactivateProcess}>Deactivate</button>
                            </template>
                        </template>
                        <template if:true={isMeta}>
                            <template if:false={MetaData.isValid}>
                                <button class="save-btn" onclick={newIntegrationModal} data-name="Meta">New</button>
                            </template>
                            <template if:true={MetaData.isValid}>
                                <button class="save-btn" onclick={newIntegrationModal} data-name="Meta">Edit</button>
                                <button class="save-btn" onclick={configureMapping}>Configure Mapping</button>
                                <button class="deactivate-btn" onclick={handleDeactivateProcess}>Deactivate</button>
                            </template>
                        </template>
                    </div>
                </div>
                <div class="details_cls">
                    <p>
                        The "Lead Capture" simplifies the integration of leads from social media platforms.
                    </p>
                </div>
            </div>
            <div class="main_container">
                <!-- Sidebar with navigator -->
                <div class="sidebar">
                    <ul>
                        <li class={MetaClass} onclick={handleMetaClick}>
                            <img src="/resource/MVEX__controlcenterimg/meta.png" alt="Meta" draggable="false"> Meta Ads
                        </li>
                        <li class={GoogleClass} onclick={handleGoogleClick}>
                            <img src="/resource/MVEX__controlcenterimg/google.png" alt="Google" draggable="false"> Google Ads
                        </li>
                    </ul>
                </div>

                <!-- Main Content Area -->
                <div class="content">
                    <!-- Tab Specific Content -->
                    <div class="tab-content">
                        <template if:true={isGoogle}>
                            <div class="field-section">
                                <template if:true={GoogleData.isValid}>
                                    <!-- <div class="data_cls"><strong>Google Ads Webhook Endpoint :</strong><p>{GoogleData.integrationData.Google_Ads_Endpoint__c}</p></div> -->
                                    <div class="data_cls"><strong>Google Ads Lead Form Secret :</strong><p>{GoogleData.integrationData.MVEX__Google_lead_Form_Secret__c}</p></div>
                                    <div class="data_cls"><strong>Created Date :</strong><p>{GoogleData.integrationData.CreatedDate}</p></div>
                                    <div class="data_cls"><strong>Last Modified Date :</strong><p>{GoogleData.integrationData.LastModifiedDate}</p></div>
                                </template>
                                <template if:false={GoogleData.isValid}>
                                    <div class="empty-state">
                                        <div class="empty-state__content">
                                            <div class="empty-state__icon">
                                                <img src="/resource/MVEX__emptyState" alt="" draggable="false">
                                            </div>
                                            <div class="empty-state__message">No Data Available to Show.</div>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </template>
                        <template if:true={isMeta}>
                            <div class="field-section">
                                <template if:true={MetaData.isValid}>
                                    <!-- <div class="data_cls"><strong>Meta Page Webhook Endpoint :</strong><p>{MetaData.integrationData.META_PAGE_ENDPOINT__c}</p></div> -->
                                    <div class="status_container">
                                        <div class="detail_grid">
                                            <div class="grid-item"><strong>Linked App:</strong> <p>{appName}</p></div>
                                            <div class="grid-item"><strong>Token Type:</strong> <p>{appType}</p></div>
                                            <div class="grid-item"><strong>Access Expires:</strong> <p>{tokenExpires}</p></div>
                                        </div>

                                        <div class="data_cls status_row grid-item">
                                            <strong><p>Token Verification Status :</p></strong>
                                            <span class={statusClass}>{metaVerificationStatus}</span>
                                        </div>

                                        <div class="data_cls status_row grid-item">
                                            <strong><p>Permission Status :</p></strong>
                                            <span class={reviewClass}>{appReviewStatus}</span>
                                        </div>

                                        <div class="data_cls status_row grid-item">
                                            <strong><p>Facebook API Version :</p></strong>
                                            <span><p>{MetaData.integrationData.MVEX__FB_API_VERSION__c}</p></span>
                                        </div>

                                        <!-- <div class="data_cls status_row grid-item">
                                            <strong>Created Date :</strong>
                                            <span><p>{MetaData.integrationData.CreatedDate}</p></span>
                                        </div> -->

                                        <div class="data_cls status_row grid-item">
                                            <strong><p>Last Modified Date :</p></strong>
                                            <span><p>{MetaData.integrationData.LastModifiedDate}</p></span>
                                        </div>

                                    </div>
                                    <!-- <div class="data_cls"><strong>Meta Page Access Token :</strong><p>{MetaData.integrationData.MVEX__ACCESS_TOKEN__c}</p></div>
                                    <div class="data_cls"><strong>Verify Token :</strong><p>{MetaData.integrationData.MVEX__VERIFY_TOKEN__c}</p></div>
                                    <div class="data_cls"><strong>App ID :</strong><p>{MetaData.integrationData.MVEX__APP_ID__c}</p></div> -->
                                    <!-- <div class="data_cls"><strong>App Secret :</strong><p>{MetaData.integrationData.APP_SECRET__c}</p></div> -->
                                    <!-- <div class="data_cls"><strong>Facebook API Version :</strong><p>{MetaData.integrationData.MVEX__FB_API_VERSION__c}</p></div>
                                    <div class="data_cls"><strong>Created Date :</strong><p>{MetaData.integrationData.CreatedDate}</p></div>
                                    <div class="data_cls"><strong>Last Modified Date :</strong><p>{MetaData.integrationData.LastModifiedDate}</p></div> -->
                                </template>
                                <template if:false={MetaData.isValid}>
                                    <div class="empty-state">
                                        <div class="empty-state__content">
                                            <div class="empty-state__icon">
                                                <img src="/resource/MVEX__emptyState" alt="" draggable="false">
                                            </div>
                                            <div class="empty-state__message">No Data Available to Show.</div>
                                        </div>
                                    </div>
                                </template>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template if:true={showIntegrationModal}>
        <c-integration-pop-up 
            integrationname={integrationName}
            integrationlabel={integrationLabel}
            onclosemodal={handleModalSelect}
        ></c-integration-pop-up>
    </template>

    <c-message-popup onconfirmation={handleConfirmation}>
    </c-message-popup>
</template>