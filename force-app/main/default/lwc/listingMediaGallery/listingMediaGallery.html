<template>
    <div class="main_div_css">
        <template if:true={isdata}>
            <div class="button-bar">
                <div class="left-container">
                    Listing Media Gallery
                </div>
                <div class="right-container">
                    <button onclick={reloadComponent} class="reload-button">
                        <svg height="20" width="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 21C16.9706 21 21 16.9706 21 12C21 9.69494 20.1334 7.59227 18.7083 6L16 3M12 3C7.02944 3 3 7.02944 3 12C3 14.3051 3.86656 16.4077 5.29168 18L8 21M21 3H16M16 3V8M3 21H8M8 21V16"
                                stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>
                    <button onclick={openImagePreview} class="preview-button">
                        <svg height="20" width="20" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="none">
                            <path fill="#ffffff" fill-rule="evenodd"
                                d="M8 3.517a1 1 0 011.62-.784l5.348 4.233a1 1 0 010 1.568l-5.347 4.233A1 1 0 018 11.983v-1.545c-.76-.043-1.484.003-2.254.218-.994.279-2.118.857-3.506 1.99a.993.993 0 01-1.129.096.962.962 0 01-.445-1.099c.415-1.5 1.425-3.141 2.808-4.412C4.69 6.114 6.244 5.241 8 5.042V3.517zm1.5 1.034v1.2a.75.75 0 01-.75.75c-1.586 0-3.066.738-4.261 1.835a8.996 8.996 0 00-1.635 2.014c.878-.552 1.695-.916 2.488-1.138 1.247-.35 2.377-.33 3.49-.207a.75.75 0 01.668.745v1.2l4.042-3.2L9.5 4.55z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <div class="cmp-name">
                <p>Image Name : {currentImageName}</p>
            </div>
            <div class="image_details">
                <template for:each={currentImageTag} for:item="tag">
                    <label key={tag} class="tags_label">{tag}</label>
                </template>
            </div>
            <div class="image-container">
                <div class="image-wrapper" onclick={openImageModel}>
                    <template if:true={showSpinner}>
                        <lightning-spinner size="medium"> </lightning-spinner>
                    </template>
                    <img src={currentImageUrl} alt="Current Image" draggable="false" />
                </div>
                <div class="arrow-container">
                    <lightning-button-icon icon-name="utility:left" variant="bare" onclick={showPreviousImage}
                        class="arrow left-arrow"></lightning-button-icon>
                    <lightning-button-icon icon-name="utility:right" variant="bare" onclick={showNextImage}
                        class="arrow right-arrow"></lightning-button-icon>
                </div>
            </div>
        </template>
        <template if:false={isdata}>
            <div class="button-bar">
                <div class="left-container">
                    Listing Media Gallery
                </div>
                <div class="right-container">
                    <button onclick={reloadComponent} class="reload-button">
                        <svg height="20" width="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path
                                d="M12 21C16.9706 21 21 16.9706 21 12C21 9.69494 20.1334 7.59227 18.7083 6L16 3M12 3C7.02944 3 3 7.02944 3 12C3 14.3051 3.86656 16.4077 5.29168 18L8 21M21 3H16M16 3V8M3 21H8M8 21V16"
                                stroke="#ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <div class="image-container image-container_for_image">
                <div class="empty-state">
                    <div class="empty-state__content">
                        <div class="empty-state__icon">
                            <img src="/resource/MVEX__emptyState" alt="" draggable="false" />
                        </div>
                        <div class="empty-state__message">No Image Found.</div>
                    </div>
                </div>
            </div>
            <div></div>
        </template>
    </div>

    <template if:true={isModalOpen}>
        <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
            aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <div class="slds-modal__close closs_icon_css" onclick={closeModal}>
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                            d="M2.53317 19.3333L0.666504 17.4667L8.13317 9.99999L0.666504 2.53332L2.53317 0.666656L9.99984 8.13332L17.4665 0.666656L19.3332 2.53332L11.8665 9.99999L19.3332 17.4667L17.4665 19.3333L9.99984 11.8667L2.53317 19.3333Z"
                            fill="white" />
                    </svg>
                </div>

                <div class="slds-modal__header blue-header">
                    <h1 id="modal-heading-01" class="slds-modal__title slds-hyphenate" tabindex="-1">Image Viewer</h1>
                </div>
                <div class="main_body">
                    <div class="slds-modal__content slds-p-around_medium">
                        <img src={modalImageUrl} alt="Image Preview" class="slds-align_absolute-center"
                            draggable="false" />
                    </div>
                    <div class="footerbtns">
                        <button class="cancel_btn_css" aria-label="Cancel and close" onclick={closeModal}>Close</button>
                    </div>
                </div>
            </div>
        </section>
        <div class="slds-backdrop slds-backdrop_open" role="presentation"></div>
    </template>
</template>